# 用例描述



## 程序加载
* 用例描述
  * 当客户端程序被打开的时的自动操作
* 参与者
  * 客户端、服务端
* 前置条件
  * 程序完全加载
* 后置条件
  * 从服务端获取当日教室租借信息
  * 返回值```statusCode```为0
* 基本路径
  1. 向服务器发起教室租借占用情况请求
  2. 服务器返回占用情况
  3. 客户端根据返回信息进行绘制
  4. 客户端自动将自己的用户类型标识为```visitor```
* 扩展点
  * 3a 返回值```statusCode```为0x0001至0x0003
    *   使用模态对话框提示对应消息信息
    *   重新开始加载（尝试5次）
* 补充说明
    * 无

## 用户登录

*   用例描述

    *   用户进行登录活动

*   参与者

    *   用户、客户端、服务端

*   前置条件

    *   用户名框和密码框正确填写

*   后置条件

    *   客户端获得的```statusCode```为0且获得一个session对象
    *   返回值```statusCode```为0

*   基本路径
    1.  用户主动点击登录按钮或者用户在```visitor```身份下尝试进行预约操作（点击timeline）
    2.  服务器返回```session```和```statusCode```
    3.  客户端将返回的```session```暂存在本地
    4.  客户端更新相应ui组件

*   扩展点

    *   2a 返回值```statusCode```为x0010

        *   使用模态消息框提示

            >   账户或密码错误

    *   2b 返回值```statusCode```为0x0011至0x0012

        *   使用模态消息框提示对应消息

    *   2c 返回值```statusCode```为0x0001至0x0003

        *   使用模态对话框提示对应消息信息
        *   重新开始加载（尝试5次），失败或被用户取消则

## 用户预约

*   用例描述
    *   用户点击timeline空白处新建一个教室预约信息
*   参与者
    *   用户、客户端、服务端
*   前置条件
    *   程序已加载
*   后置条件
    *   成功预约教室
    *   服务器返回statusCode为0
    *   产生新的session
*   基本路径
    1.  用户点击timeline空白区域
    2.  检测用户拥有一个session
    3.  检测用户类型为user或者administrator
    4.  调起预约窗口
    5.  用户填写预约起止时间
    6.  客户端生成请求预约对象发送给服务器
    7.  服务器返回应答预约对象
    8.  客户端调用模态对话框提示预约完成
*   扩展点
    *   2a 客户端session为None
        *   调起**用户登录**模块登录
        *   继续步骤2
    *   3a 客户端用户类型为visitor
        *   调起**用户登录**模块登录
        *   继续步骤2
    *   7a 返回值```statusCode```为0x0012
        *   使用模态消息框提示相应信息
        *   调起**用户登录**模块登录
        *   继续步骤2
    *   7b 返回值```statusCode```为0x0001至0x0003
        *   使用模态消息框提示相应信息
        *   重新开始加载（尝试5次），失败或用户选择取消则停止撤销此次操作。

## 教室占用信息更新

*   用例描述
    *   用户手动或计时器触发更新timeline
*   参与者
    *   [用户]、客户端、服务端
    *   前置条件
        *   程序已加载
    *   后置条件
        *   服务器返回教室占用信息
        *   服务器返回的```statusCode```为0x0000
    *   基本路径
        1.  事件触发
        2.  向服务器发送请求占用信息请求
        3.  服务器发送占用信息列表和```statusCode```
        4.  更新timeline
    *   扩展点
        *   3a 服务器返回值 ```statusCode```为0x0001至0x0003
            *   弹出模态对话框提示对应信息
            *   重新开始加载（一直尝试）
